"use strict";var vm=new Vue({el:"#app",components:{},props:{},data:{user:{},productId:0,tabActive:0,timeActive:0,monthPrice:0,productPriceId:0,goodsDetail:{},popupVisible:!1,count:1,showPop:!1,popTitle:"客服电话",setStyle:"textAlign:center;fontSize:.38rem;lineHeight:2",popContent:["0571-85180735"]},computed:{},watch:{},filters:{},methods:{getGoodsDetail:function(){var t=this,i=getApiUrl("/shop-test/rest/ddproducts/dingding/view");$.ajax({url:i,type:"GET",dataType:"json",data:{id:this.productId},xhrFields:{withCredentials:!0},crossDomain:!0,success:function(i){200==i.code?(t.goodsDetail=i.data,t.goodsDetail.productPrice=i.data.productPriceEntity[0].price.toFixed(2),t.goodsDetail.productDeposit=i.data.productDeposit.toFixed(2),t.monthPrice=t.goodsDetail.productPrice,t.productPriceId=i.data.productPriceEntity[0].id):ddToast(i.message)},error:function(t){ddToast("网络错误")}})},tabTap:function(t){this.tabActive=t},openSku:function(){this.popupVisible=!0},skuTap:function(t,i){this.timeActive=i,this.monthPrice=t.price.toFixed(2),this.productPriceId=t.id},adjust:function(t){if(!(t<0&&this.count<=1))return t>0&&this.count>=parseInt(this.goodsDetail.inventory)?void ddToast("超过库存了"):void(this.count+=t)},openModal:function(){this.showPop=!0},toOrderComfirm:function(){var t=this,i=getApiUrl("/shop-test/rest/dingDingUserInfo/DdStatus");$.ajax({url:i,type:"POST",dataType:"json",data:{userId:this.user.userId,nailCropId:this.user.corpId},xhrFields:{withCredentials:!0},crossDomain:!0,success:function(i){return alert(JSON.stringify(i)),7014==i.code?void ddToast("授权信息审核中~"):(ddToast(i.message),void(location.href="orderComfirm.html?product="+t.productId+"-"+t.productPriceId+"-"+t.count))},error:function(t){ddToast("网络错误")}})}},created:function(){},destroyed:function(){},mounted:function(){this.user=getSession(),this.productId=getUrlParam("productId"),this.getGoodsDetail()},template:'\n    <div class="regular">\n            \n    <mt-swipe :auto="3000" style="height:6.82rem;" class="writeBackColor layout">\n        <mt-swipe-item v-for="(item, index) in goodsDetail.productImages">\n            <img class="full-width" :src="item.imagePath" style="will-change: transform;">\n        </mt-swipe-item>\n    </mt-swipe>\n\n\n\n    <div class="content writeBackColor">\n        <div class="title overHidden">{{goodsDetail.name}}</div>\n        <div class="mediumstFont light-gray overHidden">{{goodsDetail.brief}}</div>\n        <div class="priceTitle">月租金<span class="unit">￥</span><span class="largestFont" style="margin-right:.2rem">{{goodsDetail.productPrice}}</span>起</div>\n        <div class="gray regular smallFont deposit">\n            <span>\n                <span style="background: #F5F5F5;padding:.03rem .07rem">官网售价</span>\n                <span class="smallerFont" style="color:#2A2A2A">￥</span><span class="mediumFont" style="color:#2A2A2A">{{goodsDetail.productDeposit}}</span>\n            </span>\n            <span class="tip">非全新</span>\n        </div>\n    </div>\n\n\n    <div class="writeBackColor layout" style="margin-top:.31rem;padding: .4rem .3rem">\n        <p class="mediumerFont black">租赁流程</p>\n        <img src="asset/images/icon/lease_process.png" class="full-width" style="margin-top:.2rem">\n    </div>\n\n    <div class="tab writeBackColor" style="margin-top:.2rem">\n        <span @click="tabTap(0)" :class="{\'tabActive\':tabActive==0}">商品介绍</span>\n        <span @click="tabTap(1)" :class="{\'tabActive\':tabActive==1}">规格参数</span>\n        <span @click="tabTap(2)" :class="{\'tabActive\':tabActive==2}">售后说明</span>\n    </div>\n    <div style="margin-bottom:1rem" v-if="goodsDetail.productDescEntity">\n        <div v-for="item in goodsDetail.productDescEntity.contentlist" v-show="tabActive == 0" :key="item">\n            <image :src="item" class="full-width"/>\n        </div>\n        <div v-for="item in goodsDetail.productDescEntity.specificationslist" v-show="tabActive == 1" :key="item">\n            <image :src="item" class="full-width" />\n        </div>\n        <div v-for="item in goodsDetail.productDescEntity.afterSalesInstructionslist" v-show="tabActive == 2" :key="item">\n            <image :src="item" class="full-width" />\n        </div>\n    </div>\n\n    <div class="fixed-bottom">\n        <span style="width:83%;display:inline-block">\n            <mt-button class="largeFont right-button" @click="openSku">立即租赁</mt-button>\n        </span>\n        <span style="width:17%;float:left" >\n            <mt-button style="width:100%;height:1rem" @click="openModal">\n                <img style="height:.5rem;width:auto;vertical-align: middle;" src="asset/images/icon/service.png">\n            </mt-button>\n        </span>\n    </div>\n    \n    <!-- sku -->\n    <mt-popup v-model="popupVisible" position="bottom" class="popup">\n        <div style="margin: 0 .4rem;">\n            <div style="padding: .28rem 0;position: relative;">\n                <img :src="goodsDetail.cover" style="width:1.5rem">\n                <span class="sku-price">\n                    <span style="font-size:.288rem">￥</span>{{monthPrice}}<span style="font-size:.24rem">/月</span>\n                </span>\n            </div>\n            <div style="background: linear-gradient(90deg, #F3654C , #ffffff);height:1px"></div>\n            <div class="popup-sku">\n                <p>租用方式</p>\n                <div>\n                    <!-- <span class="sku-active">一次性付清（立减189元）</span> -->\n                    <span class="sku-active">按月支付</span>\n                </div>\n                <p>租期</p>\n                <div>\n                    <span v-for="(item, index) in goodsDetail.productPriceEntity" \n                        :class="{\'sku-active\':timeActive==index}" \n                        style="padding: .09rem .37rem .08rem .37rem;" \n                        @click="skuTap(item, index)">{{item.timeLength}}期</span>\n                </div>\n                <p>数量</p>\n                <div class="sku-number">\n                    <span class="reduce" @click="adjust(-1)">-</span><span class="num">{{count}}</span><span class="add" @click="adjust(1)">+</span>\n                </div>\n            </div>\n            <mt-button class="full-width submit" @click="toOrderComfirm()">确认</mt-button>\n        </div>\n    </mt-popup>\n    <pop-modal v-model="showPop" :poptitle="popTitle" :popcontent="popContent" :setstyle="setStyle"></pop-modal>\n</div>\n    \n    '});