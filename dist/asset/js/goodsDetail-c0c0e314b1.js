"use strict";var vm=new Vue({el:"#app",components:{},props:{},data:{user:{},productId:0,tabActive:0,timeActive:0,monthPrice:0,productPriceId:0,goodsDetail:{},popupVisible:!1,count:1,showPop:!1,popTitle:"客服电话",setStyle:"textAlign:center;fontSize:.38rem;lineHeight:2;",popContent:['<a href="tel:0571-8518073" style="color:#333">0571-85180735</a>']},computed:{},watch:{},filters:{},methods:{getGoodsDetail:function(){var t=this,o=getApiUrl("/shop-test/rest/ddproducts/dingding/view");$.ajax({url:o,type:"GET",dataType:"json",data:{id:this.productId},xhrFields:{withCredentials:!0},crossDomain:!0,success:function(o){200==o.code?(t.goodsDetail=o.data,t.goodsDetail.productPrice=o.data.productPriceEntity[0].price.toFixed(2),t.goodsDetail.productDeposit=o.data.productDeposit.toFixed(2),t.monthPrice=t.goodsDetail.productPrice,t.productPriceId=o.data.productPriceEntity[0].id):ddToast(o.message)},error:function(t){ddToast("网络错误")}})},tabTap:function(t){this.tabActive=t},openSku:function(){this.popupVisible=!0},skuTap:function(t,o){this.timeActive=o,this.monthPrice=t.price.toFixed(2),this.productPriceId=t.id},adjust:function(t){if(!(t<0&&this.count<=1))return t>0&&this.count>=parseInt(this.goodsDetail.inventory)?void ddToast("超过库存了"):void(this.count+=t)},openModal:function(){this.showPop=!0},toOrderComfirm:function(){var t=this;if(this.count>this.goodsDetail.inventory)return void ddToast("库存不足~");var o=getApiUrl("/shop-test/rest/dingDingUserInfo/DdStatus");$.ajax({url:o,type:"POST",dataType:"json",data:{userId:this.user.userId,nailCropId:this.user.corpId},xhrFields:{withCredentials:!0},crossDomain:!0,success:function(o){if(7016==o.code);else{if(7014==o.code)return void ddToast("授权信息审核中~");location.href="orderComfirm.html?product="+t.productId+"-"+t.productPriceId+"-"+t.count}},error:function(t){ddToast("网络错误")}})}},created:function(){},destroyed:function(){},mounted:function(){this.user=getSession(),this.productId=getUrlParam("productId"),this.getGoodsDetail(),/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)&&($(".v-modal").on("touchmove",function(t){t.stopPropagation(),t.preventDefault()}),$(".mint-popup-bottom").on("touchmove",function(t){t.stopPropagation(),t.preventDefault()}))}});