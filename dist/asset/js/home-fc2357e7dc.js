"use strict";var vm=new Vue({el:"#app",components:{},data:{id:"",goodsList1:[],show:!0,selected:[],corpId:""},computed:{},watch:{},filters:{},methods:{getGoodsList:function(t){var e=this,o=getApiUrl("/rest/products/list");$.ajax({type:"GET",url:o,xhrFields:{withCredentails:!0},crossDomain:!0,data:{categoryId:1},success:function(t){e.goodsList1=t.data}})},toUserCenter:function(){location.href="userCenter.html"},toGoodsDetail:function(t){location.href="goodsDetail.html?productId="+t},getAuthCode:function(){var t=this,e=getApiUrl("/ding-isv-access/get_js_config");$.ajax({url:e,type:"GET",dataType:"json",data:{url:window.location.href,corpId:this.corpId},xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){ddConfig(e),dd.ready(function(){dd.runtime.permission.requestAuthCode({corpId:t.corpId,onSuccess:function(t){alert("requestAuthCode:"+JSON.stringify(t)),getUserId(t.code)},onFail:function(t){alert("fail"+JSON.stringify(t))}})})},error:function(t){alert("error:"+JSON.stringify(t))}})},getUserId:function(){var t=this,e=getApiUrl("/ding-isv-access/get_user_info");$.ajax({url:e,type:"GET",dataType:"json",data:{url:window.location.href,corpId:this.corpId,code:code},xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){alert("sucess:"+JSON.stringify(e));var o={corpId:t.corpId,userId:e.userId};setSession(o)},error:function(t){ddToast("网络错误")}})}},created:function(){},destroyed:function(){},mounted:function(){this.corpId=getUrlParam("corpId"),this.getGoodsList(),this.getAuthCode()}});