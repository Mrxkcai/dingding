"use strict";var vm=new Vue({el:"#app",components:{},props:{},data:{user:{},tabDefault:[{id:-1,name:"全部"},{id:9,name:"租用中"},{id:2,name:"待发货"},{id:3,name:"待收货"},{id:0,name:"待支付"}],tabNew:[],tab:[{id:-1,name:"全部"},{id:9,name:"租用中"},{id:2,name:"待发货"},{id:3,name:"待收货"},{id:0,name:"待支付"}],open:!1,tabId:-1,clientWidth:{},categryList:[[{id:10,name:"租期已满"},{id:1,name:"订单取消"},{id:15,name:"审核中"},{id:16,name:"审核失败"}]],orderList:[],page:1,pageSize:15,loading:!1,isEnd:!1,orderStatus:{cancel:"1",unpay:"0",lease:"9",complete:"10",send:"2",receive:"3",end:"4",authing:"15",authFail:"16"}},computed:{},watch:{},filters:{},methods:{loadMore:function(){0!=this.orderList&&1!=this.isEnd&&(this.loading=!0,this.getOrderList())},getOrderList:function(){var t=this,e=getApiUrl("/shop-test/rest/orders/dingding/list");$.ajax({url:e,type:"GET",dataType:"json",data:{userid:this.user.userId,nailCropId:this.user.corpId,status:this.tabId,page:this.page,rows:this.pageSize},xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){if(200==e.code){if(0==e.data.data.length)return t.isEnd=!0,void(t.loading=!1);e.data.data.forEach(function(t){t.orderTime=dateFormat(t.createTime,20,"-","-"," ")}),t.orderList=t.orderList.concat(e.data.data),t.page+=1,t.loading=!1}else ddToast(e.message)},error:function(t){ddToast("网络错误")}})},getOrderStatus:function(t){var e="";return e=t==this.orderStatus.unpay?"待支付":t==this.orderStatus.lease?"租赁中":t==this.orderStatus.complete?"租期已满":t==this.orderStatus.send?"待发货":t==this.orderStatus.receive?"待收货":t==this.orderStatus.end?"交易结束":t==this.orderStatus.authing?"审核中":t==this.orderStatus.authFail?"审核失败":t==this.orderStatus.cancel?"订单取消":"订单已失效"},showCategory:function(){this.open=!this.open,this.open?(this.tabNew=this.tab,this.tab=this.tabDefault):this.tab=this.tabNew},chooseCategory:function(t,e){e==-1&&(e=15==t||16==t||1==t||10==t?1:0),e&&(this.tabNew=this.categryList[e-1],this.tab=this.tabNew),this.tabId=t,this.open=!1,this.orderList=[],this.page=1,this.loading=!1,this.isEnd=!1,this.getOrderList()},toLogistics:function(t){location.href="logistics.html?orderNo="+t.orderNo+"&createTime="+t.createTime},toOrderDetail:function(t){location.href="orderDetail.html?orderId="+t.orderId}},created:function(){},destroyed:function(){},mounted:function(){this.user=getSession(),this.tabId=getUrlParam("status"),this.chooseCategory(this.tabId||-1,-1)},template:'\n    <div class="container">\n        <!-- 类别 -->\n        <div style="position: fixed;top: 0;width: 100%;z-index: 10;border-bottom: 1px solid rgba(0,0,0,0.12);border-top: 1px solid #f7f7f7;">\n            <div style="padding:0.27rem 0 0 .1rem;background-color:white;border-bottom:1px solid #eeeeee">\n                <div style="position:relative">\n                    <div class="category" :style="{\'width\': tab.length == 1 ? \'1.6rem\' : \'\'}">\n                        <div v-for="tabitem in tab" style="text-align:center;">\n                            <span class="type" :class="{choose:tabitem.id == tabId}" @click="chooseCategory(tabitem.id, 0)">{{tabitem.name}}</span>\n                        </div>\n                    </div>\n                    <div style="right: .1rem;top: 0.05rem;position:absolute;width:0.5rem;height:0.5rem" @click="showCategory">\n                        <img style="width:0.32rem;height:auto" :class="{rotate:open}" src="asset/images/icon/up.png">\n                    </div>\n\n                </div>\n            </div>\n            <transition name="mu-popover">\n                <div v-show="open" class="mu-popover" style="padding-right: .6rem">\n                    <div style="padding-right: .6rem;border-bottom: 1px solid rgba(0,0,0,0.12);">\n                        <div style="background-color:#fff;display: flex;justify-content: space-around;">\n                            <span style="box-sizing:border-box;padding:0.24rem 0" v-for="categryitem in categryList[0]" :key="categryitem.categoryId" @click="chooseCategory(categryitem.id, 1)"\n                                class="type"  :class="{choose:categryitem.id == tabId}">{{categryitem.name}}</span>\n                        </div>\n                    </div>\n                    <div style="padding-right: 5.7rem">\n                        <div style="background-color:#fff;display: flex;justify-content: space-around;">\n                            <span style="box-sizing:border-box;padding:0.24rem 0" v-for="categryitem in categryList[1]" :key="categryitem.categoryId" @click="chooseCategory(categryitem.id, 2)"\n                                class="type"  :class="{choose:categryitem.id == tabId}">{{categryitem.name}}</span>\n                        </div>\n                    </div>\n                </div>\n            </transition>\n        </div>\n\n        <div v-infinite-scroll="loadMore" infinite-scroll-disabled="loading" infinite-scroll-distance="10">\n            <div :style="{\'margin-top\': open ? \'1.9rem\' : \'1.1rem\'}" style="transition: all .3s;">\n                <div v-for="(item, index) in orderList" :key="item">\n                    <div class="orderBar line mediumerFont black">\n                        <span>{{item.orderTime}}</span>\n                        <span>{{getOrderStatus(item.status)}}</span>\n                    </div>\n                    <a @click="toOrderDetail(item)"><good-info :goodsinfo="item"></good-info></a>\n                    <div class="footer" v-if="item.status == 3 || item.status == 9 || item.status == 10">\n                        <button class="hollow-button" @click="toLogistics(item)">订单跟踪</button>\n                    </div>\n                </div>\n            </div>\n            <div v-if="orderList.length==0 && isEnd" class="mediumFont orderNone grayBackColor">\n                <img src="asset/images/icon/none.png" style="width:2.1rem;margin-top:3rem">\n                <p class="mediumerFont black" style="margin-top:.1rem">您还没有创建订单</p>\n            </div>\n            <div v-if="orderList.length!=0 && isEnd" class="mediumFont orderNone">\n            到底了哦~\n            </div>\n        \n            <div style="text-align:center;padding:0.32rem 0" v-show="loading">\n                <mt-spinner type="fading-circle" style="display:inline-block;vertical-align: middle;"></mt-spinner>\n                加载中...\n            </div>\n        </div>\n    </div>\n    '});